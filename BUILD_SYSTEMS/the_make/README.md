# Make Build System

- A Build System is a piece of program that takes source code
as input and produces a deployable software as output.

- The host machine contains the build system

- The Make build system uses Makefiles.

- A Makefile is a text file with the name "Makefile" in a source
directory, and it contains build targets and commands that tell
Make how to build the current code base.

- A simple makefile is made up of rules written in the following
format:

```
target: prerequisite_1 prerequisite_2 prerequisite_n
    command_1
    command_2
    command_n
```

Note: a tab must be put at the beggining of every command.

**Target:** The name of a file that is generated by a program;
examples of targets are executable or object files. Can also be
the name of the action to carry out.

**Prerequisite:** File used as input to create a target

**Command:** Action carried out by make

### Example of Rule

```
main.o: main.c
    arm-none-eabi-gcc main.c -o main.o
```

### Using variables

```
CC = arm-none-eabi-gcc

main.o: main.c
    $(CC) main.c -o main.o
```

### Special Varibles

- Dependency van be replaced with `$^`
- Target can be replaced with `$@`

```
CC = arm-none-eabi-gcc

main.o: main.c
    $(CC) $^ -o $@
```

### How a Makefile is Processed

- Make reads the Makefile in the current directory

- The first target is processed first. This is known as the
default goal.

- The other rules are processed because their targets appear
as prerequisite of the goal.

- If a rule is not depended on by the goal that rule is not
processed unless it is explicitly called.